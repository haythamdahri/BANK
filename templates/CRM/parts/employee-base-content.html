{% load staticfiles %}
{% load widget_tweaks %}

<div class="content-wrapper">

    <div class="row">
        <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card">
            <div class="card card-statistics">
                <div class="card-body">
                    <div class="clearfix">
                        <div class="float-left">
                            <i class="mdi mdi-cube text-danger icon-lg"></i>
                        </div>
                        <div class="float-right">
                            <p class="mb-0 text-right">Montant des comptes</p>
                            <div class="fluid-container">
                                <h3 class="font-weight-bold text-right mb-0">{{ total_balance.normalize }}
                                    Dhs</h3>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted mt-3 mb-0">
                        <i class="mdi mdi-alert-octagon mr-1" aria-hidden="true"></i> {{ nb_clients }} client(s)
                    </p>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card">
            <div class="card card-statistics">
                <div class="card-body">
                    <div class="clearfix">
                        <div class="float-left">
                            <i class="mdi mdi-receipt text-warning icon-lg"></i>
                        </div>
                        <div class="float-right">
                            <p class="mb-0 text-right">Transactions</p>
                            <div class="fluid-container">
                                <h3 class="font-weight-medium text-right mb-0">{{ nb_transactions }}</h3>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted mt-3 mb-0">
                        <i class="mdi mdi-bookmark-outline mr-1"
                           aria-hidden="true"></i> {{ transactions_balance }} Dhs
                    </p>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card">
            <div class="card card-statistics">
                <div class="card-body">
                    <div class="clearfix">
                        <div class="float-left">
                            <i class="mdi mdi-poll-box text-success icon-lg"></i>
                        </div>
                        <div class="float-right">
                            <p class="mb-0 text-right">Retraits</p>
                            <div class="fluid-container">
                                <h3 class="font-weight-medium text-right mb-0">{{ nb_withdrawals }}</h3>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted mt-3 mb-0">
                        <i class="mdi mdi-calendar mr-1"
                           aria-hidden="true"></i> {{ withdrawals_balance.normalize }} Dhs
                    </p>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card">
            <div class="card card-statistics">
                <div class="card-body">
                    <div class="clearfix">
                        <div class="float-left">
                            <i class="mdi mdi-account-location text-info icon-lg"></i>
                        </div>
                        <div class="float-right">
                            <p class="mb-0 text-right">Versements</p>
                            <div class="fluid-container">
                                <h3 class="font-weight-medium text-right mb-0">{{ nb_deposits }}</h3>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted mt-3 mb-0">
                        <i class="mdi mdi-reload mr-1" aria-hidden="true"></i> {{ deposits_balance.normalize }}
                        Dhs
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-7 grid-margin stretch-card">
            <!--weather card-->
            <div class="card card-weather">

                <div class="card-body">
                    <div class="weather-date-location">
                        <h3>{{ city_weather.today|date:'l'|upper }}</h3>
                        <p class="text-gray">
                            <span class="weather-date">{{ date }}</span>
                            <span class="weather-location">{{ city_weather.city }}</span>
                        </p>
                    </div>
                    <div class="weather-data d-flex">
                        <div class="mr-auto">
                            <h4 class="display-3">{{ city_weather.temperature }}
                                <span class="symbol">&deg;</span>C</h4>
                            <p>
                                {{ city_weather.description }}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card-body p-0">
                    <div class="d-flex weakly-weather">
                        <div class="weakly-weather-item">
                            <p class="mb-0">
                                Humidité
                            </p>
                            <i class="mdi fa-jsfiddle"></i>
                            <p class="mb-0">
                                {{ city_weather.humidity }}
                            </p>
                        </div>
                        <div class="weakly-weather-item">
                            <p class="mb-1">
                                lever du soleil
                            </p>
                            <i class="mdi mdi-weather-sunny"></i>
                            <p class="mb-0">
                                {{ city_weather.sunrise }}
                            </p>
                        </div>
                        <div class="weakly-weather-item" style="text-align: center;">
                            <p class="mb-1">
                                coucher du soleil
                            </p>
                            <i class="mdi mdi-weather-sunset"></i>
                            <p class="mb-0">
                                {{ city_weather.sunset }}
                            </p>
                        </div>
                    </div>
                </div>

            </div>
            <!--weather card ends-->
        </div>
        <div class="col-lg-5 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <h2 class="card-title text-primary mb-5">Statistiques clients employé</h2>
                    <div class="wrapper d-flex justify-content-between">
                        <div class="side-left">
                            <p class="mb-2">Transactions des clients employé</p>
                            <p class="display-3 mb-4 font-weight-light">{{ clients_transactions_count }}</p>
                        </div>
                        <div class="side-right">
                            <small class="text-muted"></small>
                        </div>
                    </div>


                    <div class="wrapper">
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Participation des clients employé aux transactions</p>
                            <p class="mb-2 text-primary">{{ transactions_statistics|floatformat:2 }}%</p>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
                                 role="progressbar" style="width: {{ transactions_statistics }}%"
                                 aria-valuenow="{{ transactions_statistics|floatformat:2 }}"
                                 aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="wrapper mt-4">
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Participation des clients employé aux retraits</p>
                            <p class="mb-2 text-primary">{{ withdrawals_statistics|floatformat:2 }}%</p>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
                                 role="progressbar" style="width: {{ withdrawals_statistics }}%"
                                 aria-valuenow="{{ withdrawals_statistics|floatformat:2 }}"
                                 aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="wrapper mt-4">
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Participation des clients employé aux virements</p>
                            <p class="mb-2 text-info">{{ deposits_statistics|floatformat:2 }}%</p>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-info progress-bar-striped progress-bar-animated"
                                 role="progressbar" style="width: {{ deposits_statistics }}%"
                                 aria-valuenow="{{ deposits_statistics|floatformat:2 }}"
                                 aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>